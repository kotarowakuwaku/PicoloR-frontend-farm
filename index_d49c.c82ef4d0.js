(function(_){var filename = ((function(){var _documentCurrentScript = typeof document !== "undefined" ? document.currentScript : null;return typeof document === "undefined" ? require("url").pathToFileURL(__filename).href : _documentCurrentScript && _documentCurrentScript.src || new URL("index_d49c.js", document.baseURI).href})());for(var r in _){_[r].__farm_resource_pot__=filename;window['eb393d463cd769029553f2b9bfe90d8e'].__farm_module_system__.register(r,_[r])}})({"0df19b5d":function o(o,e,r,s){o._m(e),o.o(e,"GameHost",()=>y);var t=r("493f9ad4");r("b25dd2f8"),r("2d08c2e5"),r("a3876e70");var n=r("41124836"),a=r("a0fc9dfd"),i=r("19774022"),l=r("a873dcba"),c=o.i(r("ffbd9dd4")),d=o.i(r("913c70d7")),m=r("1c519549"),u=r("679030df"),f=o.i(r("8bb3aa92")),h=o.i(r("af20d690")),v=o.i(r("a55415db")),g=r("d3610244"),p=r("95106b84"),b=r("c3454ff8");function y(){var e=t._(a.useState(!1),2),r=e[0],s=e[1],y=t._(a.useState(!1),2),C=y[0],_=y[1],T=p.useParams().roomId,w=t._(a.useState([]),2),j=w[0],E=w[1];console.log("themeColors",j);var N=t._(a.useState([]),2),x=N[0],I=N[1],S=t._(a.useState([]),2),P=S[0],k=S[1];console.log("posetedname",P);var R=o.f(h)(()=>{s(!1),_(!0),D.start(),G();}),O=R.count,H=R.startCountdown,D=o.f(v)();console.log("themeColors",j);var G=async()=>{var o=new Date;console.log("timestampz",o);try{var e=await fetch("https://picolor-backend-go.onrender.com/host/room/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomID:Number(T),startTime:o})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));}catch(o){console.error("Error fetching theme colors:",o);}};a.useEffect(()=>{r&&H(3);},[r,H]),a.useEffect(()=>{(async()=>{try{var o=await fetch("https://picolor-backend-go.onrender.com/controller/colors?roomID=".concat(T),{method:"GET"});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));var e=await o.json();E(e.themeColors);}catch(o){console.error("Error fetching theme colors:",o);}})();},[T]),a.useEffect(()=>{J(j,P);},[j,P]),a.useEffect(()=>{console.log("roomId",T);var o=g.supabase.channel("table_db_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async o=>{if("INSERT"===o.eventType){var e;if(I(e=>[o.new,...e]),(null===(e=o.new)||void 0===e?void 0:e.room_id)===Number(T)){var r=await g.supabase.from("users").select("name").eq("id",o.new.user_id).single(),s=r.data,t=r.error;t?console.error(t):s&&k(e=>[{name:s.name,user_id:o.new.user_id},...e]);}}}).subscribe();return()=>{o.unsubscribe();};},[]);var A=async()=>{fetch("https://picolor-backend-go.onrender.com/host/room/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:Number(T)})}).then(o=>{o.ok?window.location.href="/PicoloR-frontend-farm/result/".concat(T):console.error("Error finishing the game");}).catch(o=>{console.error("Error finishing the game:",o);});},J=async(o,e)=>{console.log("currentThemeColors",o),console.log("currentPostedName",e);var r=o.length,s=e.length;if(console.log("themeColorNum",r),console.log("postedNum",s),0===r){console.error("themeColors is empty");return;}if(0===s){console.error("postedName is empty");return;}r===s&&(console.log("game is finished"),A());};return n.jsxs("div",{className:i.css({display:"flex",flexDirection:"column"}),children:[n.jsx(o.f(c),{mode:l.HeaderMode.GRAY}),n.jsx(m.SubPageTitle,{title:"THEME COLOR"}),n.jsx("div",{className:i.css({display:"flex",justifyContent:"space-evenly",padding:"0 10vw"}),children:j.map((o,e)=>{var r,t,a,i=null==x?void 0:x.find(e=>e.color_id===o.ColorId);return console.log("foundItem",i),n.jsxs("div",{children:[n.jsx(u.ColorCircle,{color:o.ColorCode,delay:1*e,imageURL:i?"data:image/jpeg;base64,".concat(null==i?void 0:i.image):"",rank:(null==x?void 0:null===(r=x.find(e=>e.color_id===o.ColorId))||void 0===r?void 0:r.rank)||0,onAnimationComplete:2===e?()=>s(!0):void 0},e),n.jsx(b.PostedResult,{postedTime:(null==x?void 0:null===(t=x.find(e=>e.color_id===o.ColorId))||void 0===t?void 0:t.posted_time)||"",name:(null==P?void 0:null===(a=P.find(e=>e.user_id===o.ColorId))||void 0===a?void 0:a.name)||""})]});})}),r&&n.jsx(o.f(d),{visible:!0,count:O}),n.jsx("div",{className:i.css({padding:"1vw "}),children:C&&n.jsx(o.f(f),{time:D.time})})]});}},"1973e3d0":function c(c,e,n,b){c._m(e),n("e57b3270"),n("850e6c49"),n("90522126");},"280b88a6":function n(n,c,f,i){n._m(c),f("90522126");},"2971a921":function o(o,e,t,n){o._m(e);var r=t("41124836"),i=t("43197d33"),l=t("19774022");e.default=()=>r.jsx(r.Fragment,{children:r.jsx(i.ConfigProvider,{theme:{components:{Modal:{contentBg:"transparent",boxShadow:"none",colorBgMask:"rgba(255, 255, 255, 0.8)"}}},children:r.jsxs(i.Modal,{open:!0,footer:null,closable:!1,title:null,children:[r.jsx("div",{className:l.css({display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",marginTop:"100px",fontSize:"4rem",color:"#85581A"}),children:"Loading"}),r.jsx("div",{className:l.css({top:"70%",left:"60%",width:"calc(6 * 30px)",height:"50px",display:"flex",color:"#85581A",filter:"drop-shadow(30px 25px 0 currentColor) drop-shadow(60px 0 0 currentColor) drop-shadow(120px 0 0 currentColor)",clipPath:"inset(0 100% 0 0)",animation:"l11 2s infinite steps(7)",transform:"rotate(-45deg) scale(2)",transformOrigin:"center",position:"fixed",bottom:"30%",right:"40%","&::before":{content:'""',width:"30px",height:"25px",background:"currentColor",clipPath:"polygon(0 50%, 30% 40%, 100% 0, 60% 40%, 100% 50%, 60% 60%, 100% 100%, 30% 60%)"}})})]})})});},"2c6e69f1":function e(e,o,t,r){e._m(o);var s=t("41124836"),n=t("7ed15cd5"),l=t("95106b84"),a=t("7ea85d02"),m=t("daf4d053"),j=t("0df19b5d"),x=t("403c3611"),d=t("eee422e1"),c=t("85aecc14"),u=t("e0cff433"),R=document.querySelector("#root");n.createRoot(R).render(s.jsxs(l.BrowserRouter,{basename:"/PicoloR-frontend-farm",children:[" ",s.jsxs(l.Routes,{children:[s.jsx(l.Route,{path:"/",element:s.jsx(a.Main,{})}),s.jsx(l.Route,{path:"/test",element:s.jsx(d.Test,{})}),s.jsx(l.Route,{path:"/room/:roomId",element:s.jsx(m.Rooms,{})}),s.jsx(l.Route,{path:"/controller/join",element:s.jsx(c.ControllerJoin,{})}),s.jsx(l.Route,{path:"/controller",element:s.jsx(u.ControllerPlaying,{})}),s.jsx(l.Route,{path:"/result/:roomId",element:s.jsx(x.Result,{})}),s.jsx(l.Route,{path:"/room/:roomId/hostUser",element:s.jsx(j.GameHost,{})})]})]}));},"2cc41426":function e(e,o,t,d){e._m(o);var r=t("41124836"),n=t("43197d33"),l=t("dbb535e9");o.default=e=>{var o=e.text,t=e.type,d=e.onClick;return r.jsx(n.ConfigProvider,{theme:{token:{colorText:"black",borderRadius:2,colorBorder:"black"},components:{Button:{lineWidth:4,defaultBg:t===l.ButtonMode.GREEN?"#0AC74F":"#DDDDDD",defaultColor:t===l.ButtonMode.GREEN?"white":void 0,defaultHoverBg:t===l.ButtonMode.GREEN?"#0aa141":"gray",defaultHoverColor:t===l.ButtonMode.GREEN?"#2e2e2e":"white",defaultHoverBorderColor:t===l.ButtonMode.GREEN?"#2e2e2e":"black",defaultActiveColor:t===l.ButtonMode.GREEN?"#2e2e2e":void 0,defaultActiveBg:t===l.ButtonMode.GREEN?"#088033":"#2E2E2E",defaultActiveBorderColor:t===l.ButtonMode.GREEN?"#088033":void 0}}},children:r.jsx(n.Button,{style:(l.ButtonMode.GREEN,{width:"100%",height:"100%",fontSize:"1.5rem",textAlign:"center",padding:"17px 0",borderRadius:"24px"}),onClick:d,children:o})});};},"403c3611":function o(o,r,e,t){o._m(r),o.o(r,"Result",()=>w);var a=e("15edfc35"),c=e("94a74ea6"),s=e("83a00617"),n=e("493f9ad4");e("b25dd2f8"),e("ac0fc1d5");var l=e("41124836"),d=e("a0fc9dfd"),i=o.i(e("ffbd9dd4")),f=e("a873dcba"),m=o.i(e("2cc41426")),h=e("dbb535e9"),p=e("19774022"),u=e("42bda066"),x=o.i(e("89f4b178")),y=e("95106b84"),j=o.i(e("2971a921"));function w(){var r=y.useParams().roomId,e=n._(d.useState([]),2),t=e[0],w=e[1],E=n._(d.useState(!0),2),v=E[0],g=E[1];return d.useEffect(()=>{g(!0),(async()=>{try{var o=await fetch("https://picolor-backend-go.onrender.com/host/result?roomID=".concat(r),{method:"GET"});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));var e=await o.json();console.log(e);var t=e.results.sort((o,r)=>o.Rank-r.Rank);console.log(t),w(t.map(o=>{var r=o.Image,e=s._(o,["Image"]),t="data:image/jpeg;base64,".concat(r);return console.log(c._(a._({},e),{Image:t})),c._(a._({},e),{Image:t});}));}catch(o){console.error("Fetch error:",o);}finally{g(!1);}})();},[r]),l.jsxs(l.Fragment,{children:[v&&l.jsx(o.f(j),{}),l.jsx(o.f(i),{mode:f.HeaderMode.GRAY}),l.jsx("div",{className:u.flex({mt:"90px",w:"100vw",display:"flex",justify:"center"}),children:t&&l.jsx("ul",{className:p.css({w:"80%"}),children:t.map(r=>l.jsx("li",{className:p.css({m:"12px 0"}),children:l.jsx(o.f(x),a._({},r),r.Rank)}))})}),l.jsxs("div",{className:u.flex({display:"flex",justify:"space-around",mt:"20px"}),children:[l.jsx("div",{className:p.css({w:"40%",ml:"50px"}),children:l.jsx(o.f(m),{type:h.ButtonMode.GREEN,text:"もう一度遊ぶ",onClick:()=>{g(!0),(async()=>{try{var o=await fetch("https://picolor-backend-go.onrender.com/host/room/reset?roomID=".concat(r),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));}catch(o){console.error("Fetch error:",o);}finally{window.location.href="/PicoloR-frontend-farm/room/".concat(r);}})();}})}),l.jsx("div",{className:p.css({w:"40%",mr:"50px"}),children:l.jsx(o.f(m),{type:h.ButtonMode.GRAY,text:"HOMEへ戻る",onClick:()=>{g(!0),(async()=>{try{var o=await fetch("https://picolor-backend-go.onrender.com/host/room/reset?roomID=".concat(r),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));}catch(o){console.error("Fetch error:",o);}finally{try{var e=await fetch("https://picolor-backend-go.onrender.com/host/room?roomID=".concat(r),{method:"DELETE"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));}catch(o){console.error("Fetch error:",o);}finally{window.location.href="/PicoloR-frontend-farm/";}}})();}})})]})]});}},"5303d056":function e(e,t,i,l){e._m(t);var s=i("41124836"),c=i("19774022"),n=e.i(i("9894bc2d")),a=e.i(i("ea0b0704"));t.default=function(){return s.jsxs("div",{className:c.css({w:"full",h:"full",p:"5rem 10px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[s.jsx("div",{className:c.css({w:"full",textAlign:"center",fontSize:"1.2rem",fontWeight:"bold"}),children:"ゲーム開始までお待ちください"}),s.jsx(e.f(n),{title:"遊び方",isMobile:!0,children:s.jsxs("ul",{className:c.css({h:"100%",w:"100%",maxH:"fit-content",mt:"-24px",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"}),children:[s.jsx(e.f(a),{id:"tap_color",text:"1. 撮影するテーマカラーを選択する",iconPath:"/tab_color.svg",alt:"PCとスマホのイラスト",isMobile:!0}),s.jsx(e.f(a),{id:"capture_color",text:"2. 起動したカメラで撮影する",iconPath:"/capture_color.",alt:"起動したカメラで撮影するイラスト",isMobile:!0}),s.jsx(e.f(a),{id:"picture_passed",text:"3. 送信！先に判定が通れば勝利！",iconPath:"/picture_passed.svg",alt:"判定OKが出たイラスト",isMobile:!0})]})})]});};},"679030df":function t(t,e,o,i){t._m(e),t.o(e,"ColorCircle",()=>l);var a=o("41124836"),s=o("48068335"),r=o("19774022"),l=t=>{var e=t.color,o=t.delay,i=t.imageURL,l=t.rank,n=t.onAnimationComplete;return console.log("rank",l),console.log("passedthemeColor",e),console.log("imageURL",i),a.jsx("div",{style:{position:"relative",width:"20vw",height:"20vw"},children:i?a.jsxs("div",{style:{position:"relative",width:"20vw",height:"20vw"},children:[a.jsx("img",{src:(()=>{switch(l){case 1:return"/first_place.png";case 2:return"/second_place.png";case 3:return"/third_place.png";default:return"";}})(),alt:"",className:r.css({w:"50%",h:"40%",position:"absolute",transform:"rotate(40deg)",float:"right",top:"-15%",right:"-15%",zIndex:1})}),a.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"20%",backgroundColor:e,boxShadow:"0 0 10px 0 rgba(0, 0, 0, 0.2)"}}),a.jsx("img",{src:i,alt:"Test Image",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block",width:"60%",height:"80%"}})]}):a.jsx(s.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:o,duration:.5,ease:"easeInOut"},onAnimationComplete:n,style:{display:"flex",width:"20vw",height:"20vw",borderRadius:"50%",backgroundColor:e,boxShadow:"0 0 10px 0 rgba(0, 0, 0, 0.2)"}})});};},"6d142275":function r(r,t,o,i){r._m(t),r.o(t,"css",()=>p),r.o(t,"mergeCss",()=>m);var n=o("493f9ad4"),a=o("a7897337");o("db138b4d"),o("2d08c2e5"),o("a3876e70"),o("e57b3270"),o("850e6c49");var e=o("90522126"),d=o("f510c216"),s=new Map,l=new Map;"aspectRatio:asp,boxDecorationBreak:bx-db,zIndex:z,boxSizing:bx-s,objectPosition:obj-p,objectFit:obj-f,overscrollBehavior:ovs-b,overscrollBehaviorX:ovs-bx,overscrollBehaviorY:ovs-by,position:pos/1,top:top,left:left,inset:inset,insetInline:inset-x/insetX,insetBlock:inset-y/insetY,insetBlockEnd:inset-be,insetBlockStart:inset-bs,insetInlineEnd:inset-e/insetEnd/end,insetInlineStart:inset-s/insetStart/start,right:right,bottom:bottom,float:float,visibility:vis,display:d,hideFrom:hide,hideBelow:show,flexBasis:flex-b,flex:flex,flexDirection:flex-d/flexDir,flexGrow:flex-g,flexShrink:flex-sh,gridTemplateColumns:grid-tc,gridTemplateRows:grid-tr,gridColumn:grid-c,gridRow:grid-r,gridColumnStart:grid-cs,gridColumnEnd:grid-ce,gridAutoFlow:grid-af,gridAutoColumns:grid-ac,gridAutoRows:grid-ar,gap:gap,gridGap:grid-g,gridRowGap:grid-rg,gridColumnGap:grid-cg,rowGap:rg,columnGap:cg,justifyContent:jc,alignContent:ac,alignItems:ai,alignSelf:as,padding:p/1,paddingLeft:pl/1,paddingRight:pr/1,paddingTop:pt/1,paddingBottom:pb/1,paddingBlock:py/1/paddingY,paddingBlockEnd:pbe,paddingBlockStart:pbs,paddingInline:px/paddingX/1,paddingInlineEnd:pe/1/paddingEnd,paddingInlineStart:ps/1/paddingStart,marginLeft:ml/1,marginRight:mr/1,marginTop:mt/1,marginBottom:mb/1,margin:m/1,marginBlock:my/1/marginY,marginBlockEnd:mbe,marginBlockStart:mbs,marginInline:mx/1/marginX,marginInlineEnd:me/1/marginEnd,marginInlineStart:ms/1/marginStart,spaceX:sx,spaceY:sy,outlineWidth:ring-w/ringWidth,outlineColor:ring-c/ringColor,outline:ring/1,outlineOffset:ring-o/ringOffset,divideX:dvd-x,divideY:dvd-y,divideColor:dvd-c,divideStyle:dvd-s,width:w/1,inlineSize:w-is,minWidth:min-w/minW,minInlineSize:min-w-is,maxWidth:max-w/maxW,maxInlineSize:max-w-is,height:h/1,blockSize:h-bs,minHeight:min-h/minH,minBlockSize:min-h-bs,maxHeight:max-h/maxH,maxBlockSize:max-b,color:c,fontFamily:ff,fontSize:fs,fontSizeAdjust:fs-a,fontPalette:fp,fontKerning:fk,fontFeatureSettings:ff-s,fontWeight:fw,fontSmoothing:fsmt,fontVariant:fv,fontVariantAlternates:fv-alt,fontVariantCaps:fv-caps,fontVariationSettings:fv-s,fontVariantNumeric:fv-num,letterSpacing:ls,lineHeight:lh,textAlign:ta,textDecoration:td,textDecorationColor:td-c,textEmphasisColor:te-c,textDecorationStyle:td-s,textDecorationThickness:td-t,textUnderlineOffset:tu-o,textTransform:tt,textIndent:ti,textShadow:tsh,textShadowColor:tsh-c/textShadowColor,textOverflow:tov,verticalAlign:va,wordBreak:wb,textWrap:tw,truncate:trunc,lineClamp:lc,listStyleType:li-t,listStylePosition:li-pos,listStyleImage:li-img,listStyle:li-s,backgroundPosition:bg-p/bgPosition,backgroundPositionX:bg-p-x/bgPositionX,backgroundPositionY:bg-p-y/bgPositionY,backgroundAttachment:bg-a/bgAttachment,backgroundClip:bg-cp/bgClip,background:bg/1,backgroundColor:bg-c/bgColor,backgroundOrigin:bg-o/bgOrigin,backgroundImage:bg-i/bgImage,backgroundRepeat:bg-r/bgRepeat,backgroundBlendMode:bg-bm/bgBlendMode,backgroundSize:bg-s/bgSize,backgroundGradient:bg-grad/bgGradient,textGradient:txt-grad,gradientFromPosition:grad-from-pos,gradientToPosition:grad-to-pos,gradientFrom:grad-from,gradientTo:grad-to,gradientVia:grad-via,gradientViaPosition:grad-via-pos,borderRadius:bdr/rounded,borderTopLeftRadius:bdr-tl/roundedTopLeft,borderTopRightRadius:bdr-tr/roundedTopRight,borderBottomRightRadius:bdr-br/roundedBottomRight,borderBottomLeftRadius:bdr-bl/roundedBottomLeft,borderTopRadius:bdr-t/roundedTop,borderRightRadius:bdr-r/roundedRight,borderBottomRadius:bdr-b/roundedBottom,borderLeftRadius:bdr-l/roundedLeft,borderStartStartRadius:bdr-ss/roundedStartStart,borderStartEndRadius:bdr-se/roundedStartEnd,borderStartRadius:bdr-s/roundedStart,borderEndStartRadius:bdr-es/roundedEndStart,borderEndEndRadius:bdr-ee/roundedEndEnd,borderEndRadius:bdr-e/roundedEnd,border:bd,borderWidth:bd-w,borderTopWidth:bd-t-w,borderLeftWidth:bd-l-w,borderRightWidth:bd-r-w,borderBottomWidth:bd-b-w,borderColor:bd-c,borderInline:bd-x/borderX,borderInlineWidth:bd-x-w/borderXWidth,borderInlineColor:bd-x-c/borderXColor,borderBlock:bd-y/borderY,borderBlockWidth:bd-y-w/borderYWidth,borderBlockColor:bd-y-c/borderYColor,borderLeft:bd-l,borderLeftColor:bd-l-c,borderInlineStart:bd-s/borderStart,borderInlineStartWidth:bd-s-w/borderStartWidth,borderInlineStartColor:bd-s-c/borderStartColor,borderRight:bd-r,borderRightColor:bd-r-c,borderInlineEnd:bd-e/borderEnd,borderInlineEndWidth:bd-e-w/borderEndWidth,borderInlineEndColor:bd-e-c/borderEndColor,borderTop:bd-t,borderTopColor:bd-t-c,borderBottom:bd-b,borderBottomColor:bd-b-c,borderBlockEnd:bd-be,borderBlockEndColor:bd-be-c,borderBlockStart:bd-bs,borderBlockStartColor:bd-bs-c,opacity:op,boxShadow:bx-sh/shadow,boxShadowColor:bx-sh-c/shadowColor,mixBlendMode:mix-bm,filter:filter,brightness:brightness,contrast:contrast,grayscale:grayscale,hueRotate:hue-rotate,invert:invert,saturate:saturate,sepia:sepia,dropShadow:drop-shadow,blur:blur,backdropFilter:bkdp,backdropBlur:bkdp-blur,backdropBrightness:bkdp-brightness,backdropContrast:bkdp-contrast,backdropGrayscale:bkdp-grayscale,backdropHueRotate:bkdp-hue-rotate,backdropInvert:bkdp-invert,backdropOpacity:bkdp-opacity,backdropSaturate:bkdp-saturate,backdropSepia:bkdp-sepia,borderCollapse:bd-cl,borderSpacing:bd-sp,borderSpacingX:bd-sx,borderSpacingY:bd-sy,tableLayout:tbl,transitionTimingFunction:trs-tmf,transitionDelay:trs-dly,transitionDuration:trs-dur,transitionProperty:trs-prop,transition:trs,animation:anim,animationName:anim-n,animationTimingFunction:anim-tmf,animationDuration:anim-dur,animationDelay:anim-dly,animationPlayState:anim-ps,animationComposition:anim-comp,animationFillMode:anim-fm,animationDirection:anim-dir,animationIterationCount:anim-ic,animationRange:anim-r,animationState:anim-s,animationRangeStart:anim-rs,animationRangeEnd:anim-re,animationTimeline:anim-tl,transformOrigin:trf-o,transformBox:trf-b,transformStyle:trf-s,transform:trf,rotate:rotate,rotateX:rotate-x,rotateY:rotate-y,rotateZ:rotate-z,scale:scale,scaleX:scale-x,scaleY:scale-y,translate:translate,translateX:translate-x/x,translateY:translate-y/y,translateZ:translate-z/z,accentColor:ac-c,caretColor:ca-c,scrollBehavior:scr-bhv,scrollbar:scr-bar,scrollbarColor:scr-bar-c,scrollbarGutter:scr-bar-g,scrollbarWidth:scr-bar-w,scrollMargin:scr-m,scrollMarginLeft:scr-ml,scrollMarginRight:scr-mr,scrollMarginTop:scr-mt,scrollMarginBottom:scr-mb,scrollMarginBlock:scr-my/scrollMarginY,scrollMarginBlockEnd:scr-mbe,scrollMarginBlockStart:scr-mbt,scrollMarginInline:scr-mx/scrollMarginX,scrollMarginInlineEnd:scr-me,scrollMarginInlineStart:scr-ms,scrollPadding:scr-p,scrollPaddingBlock:scr-py/scrollPaddingY,scrollPaddingBlockStart:scr-pbs,scrollPaddingBlockEnd:scr-pbe,scrollPaddingInline:scr-px/scrollPaddingX,scrollPaddingInlineEnd:scr-pe,scrollPaddingInlineStart:scr-ps,scrollPaddingLeft:scr-pl,scrollPaddingRight:scr-pr,scrollPaddingTop:scr-pt,scrollPaddingBottom:scr-pb,scrollSnapAlign:scr-sa,scrollSnapStop:scrs-s,scrollSnapType:scrs-t,scrollSnapStrictness:scrs-strt,scrollSnapMargin:scrs-m,scrollSnapMarginTop:scrs-mt,scrollSnapMarginBottom:scrs-mb,scrollSnapMarginLeft:scrs-ml,scrollSnapMarginRight:scrs-mr,scrollSnapCoordinate:scrs-c,scrollSnapDestination:scrs-d,scrollSnapPointsX:scrs-px,scrollSnapPointsY:scrs-py,scrollSnapTypeX:scrs-tx,scrollSnapTypeY:scrs-ty,scrollTimeline:scrtl,scrollTimelineAxis:scrtl-a,scrollTimelineName:scrtl-n,touchAction:tch-a,userSelect:us,overflow:ov,overflowWrap:ov-wrap,overflowX:ov-x,overflowY:ov-y,overflowAnchor:ov-a,overflowBlock:ov-b,overflowInline:ov-i,overflowClipBox:ovcp-bx,overflowClipMargin:ovcp-m,overscrollBehaviorBlock:ovs-bb,overscrollBehaviorInline:ovs-bi,fill:fill,stroke:stk,strokeWidth:stk-w,strokeDasharray:stk-dsh,strokeDashoffset:stk-do,strokeLinecap:stk-lc,strokeLinejoin:stk-lj,strokeMiterlimit:stk-ml,strokeOpacity:stk-op,srOnly:sr,debug:debug,appearance:ap,backfaceVisibility:bfv,clipPath:cp-path,hyphens:hy,mask:msk,maskImage:msk-i,maskSize:msk-s,textSizeAdjust:txt-adj,container:cq,containerName:cq-n,containerType:cq-t,textStyle:textStyle".split(",").forEach(r=>{var t=n._(r.split(":"),2),o=t[0],i=t[1],e=a._(i.split("/")),d=e[0],c=e.slice(1);s.set(o,d),c.length&&c.forEach(r=>{l.set("1"===r?d:r,o);});});var c=r=>l.get(r)||r,b={conditions:{shift:d.sortConditions,finalize:d.finalizeConditions,breakpoints:{keys:["base","sm","md","lg","xl","2xl"]}},utility:{transform:(r,t)=>{var o=c(r),i=s.get(o)||e.hypenateProperty(o);return{className:"".concat(i,"_").concat(e.withoutSpace(t))};},hasShorthand:!0,toHash:(r,t)=>t(r.join(":")),resolveShorthand:c}},g=e.createCss(b),p=function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return g(m(...t));};p.raw=function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];return m(...t);};var m=e.createMergeCss(b).mergeCss;},"7ea85d02":function e(e,s,t,o){e._m(s),e.o(s,"Main",()=>m),t("b25dd2f8"),t("e57b3270"),t("850e6c49");var a=t("41124836"),r=t("43197d33"),c=t("19774022"),n=t("6483e09f"),i=e.i(t("ea0b0704")),l=e.i(t("9894bc2d")),d=n.createStyles(()=>({homeButton:{textAlign:"center",backgroundColor:"var(--light)",fontSize:"3rem",color:"var(--secondary)",padding:"10px 120px",border:"4px dashed #2d2d2d",borderRadius:"10px",height:"auto",transition:"background-color 0.2s","&:hover":{backgroundColor:"var(--dark)"}}}));function m(){var s=d().styles,t=async()=>{fetch("https://picolor-backend-go.onrender.com/host/room",{method:"POST"}).then(async e=>{var s=(await e.json()).roomID;console.log(s),window.location.href="http://picolor-backet.s3-website-us-west-2.amazonaws.com/room/".concat(s);}).catch(e=>{throw Error(e);});};return a.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"20px 60px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[a.jsx("img",{src:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/brash.svg",alt:"",className:c.css({position:"absolute",mt:"-10dvh",top:"30dvh",right:"0",h:"380px",zIndex:"-1"})}),a.jsx("img",{src:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/palette.svg",alt:"",className:c.css({position:"absolute",top:"0",left:"0",h:"380px",zIndex:"-1"})}),a.jsxs("div",{className:c.css({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),children:[a.jsx("h2",{className:c.css({fontSize:"2.6rem",fontWeight:"bold"}),children:"色を探せ！ひらめきカラースナップ対決！".split("").map((e,s)=>a.jsx("span",{className:c.css({display:"inline-block",transition:"transform 0.3s",transform:"translateY(0)","&:hover":{transform:"translateY(-10px)"}}),children:e},s))}),a.jsx("h1",{children:a.jsx("img",{className:c.css({mt:"-1rem",mb:"-2rem",h:"30dvh",transition:"transform 0.2s","&:hover":{transform:"scale(1.2)"}}),src:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/Logo.svg",alt:"PicoloRロゴ"})})]}),a.jsx(r.ConfigProvider,{theme:{components:{Button:{defaultHoverBg:"#dddddd",defaultHoverColor:"var(--secondary)",defaultHoverBorderColor:"var(--secondary)",defaultActiveColor:"#F5F5F5",defaultActiveBg:"#2E2E2E",defaultActiveBorderColor:"#2E2E2E"}}},children:a.jsx(r.Button,{className:s.homeButton,onClick:t,children:"START"})}),a.jsx(e.f(l),{title:"遊び方",children:a.jsxs("ul",{className:c.css({p:"0 2.8rem",mt:"-24px",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",alignItems:"center"}),children:[a.jsx(e.f(i),{id:"devices",text:"1. 人数分のスマホを登録",iconPath:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/devices.svg",alt:"PCとスマホのイラスト"}),a.jsx(e.f(i),{id:"laptop_colors",text:"2. テーマカラーの発表！",iconPath:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/laptop_colors.svg",alt:"PCにテーマカラーが表示されるイラスト"}),a.jsx(e.f(i),{id:"capture_color",text:"3. スマホでテーマ色の写真を撮影！",iconPath:"http://picolor-backet.s3-website-us-west-2.amazonaws.com/capture_color.svg",alt:"スマホでカラーを撮影するイラスト"})]})})]});}},"85aecc14":function e(e,r,o,t){e._m(r),e.o(r,"ControllerJoin",()=>d),o("81b47ea5"),o("ec86718a"),o("2d08c2e5"),o("a3876e70"),o("b25dd2f8");var n=o("41124836"),a=o("43197d33"),s=o("19774022"),i=e.i(o("ffbd9dd4")),l=o("a873dcba"),c=o("6483e09f").createStyles(()=>({input:{width:"100%",borderRadius:"10px",border:"2px solid var(--secondary)",padding:"10px",fontSize:"1.5rem",textAlign:"center",fontFamily:"M PLUS 1p"},field:{width:"100%","& .ant-form-item-label":{fontWeight:"regular",fontFamily:"M PLUS 1p",textAlign:"center",width:"100%"}},customLabel:{fontSize:"1.5rem",color:"var(--secondary)"}}));function d(){var r=c().styles,o=new URL(window.location.href).searchParams.get("roomID"),t=Number(o);return o?n.jsxs("main",{className:s.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[n.jsx(e.f(i),{mode:l.HeaderMode.GREEN}),n.jsxs(a.Form,{onFinish:e=>{!async function(){try{var r=await fetch("https://picolor-backend-go.onrender.com/controller/user",{method:"POST",body:JSON.stringify({userName:e.username})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));var n=(await r.json()).userID;console.log(n);var a=await fetch("https://picolor-backend-go.onrender.com/controller/room",{method:"POST",body:JSON.stringify({roomID:t,userID:n})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));window.location.href="/PicoloR-frontend-farm/controller/?roomID=".concat(o,"&userID=").concat(n);}catch(e){console.error("エラー:",e);}}();},autoComplete:"off",className:r.field,requiredMark:!1,children:[n.jsx(a.Form.Item,{label:n.jsx("span",{className:r.customLabel,children:"USER NAME"}),name:"username",rules:[{required:!0,message:"Please input your username!"}],children:n.jsx(a.Input,{size:"large",className:r.input})}),n.jsx(a.Form.Item,{label:null,children:n.jsx(a.ConfigProvider,{theme:{token:{colorText:"black",borderRadius:4},components:{Button:{colorPrimaryHover:"black",colorPrimaryBorderHover:"#007A30"}}},children:n.jsx(a.Button,{type:"primary",htmlType:"submit",style:{marginTop:"40px",fontSize:"1.5rem",width:"100%",textAlign:"center",backgroundColor:"#0AC74F",color:"white",padding:"24px",border:"2px solid black",fontFamily:"M PLUS 1p",fontWeight:"bold",borderRadius:"10px"},children:"JOIN"})})})]})]}):n.jsxs("main",{className:s.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[n.jsx(e.f(i),{mode:l.HeaderMode.GREEN}),n.jsxs("p",{className:s.css({fontSize:"1.2rem",fontWeight:"bold",color:"red",textAlign:"center"}),children:["roomID が存在しません。",n.jsx("br",{}),"正しい画面に接続してください。"]})]});}},"89f4b178":function s(s,e,l,a){s._m(e);var r=l("41124836"),c=l("111b3206"),n=l("19774022");e.default=s=>{var e=s.Color,l=s.Rank,a=s.UserName,i=s.PostedTime,t=s.imageURL;return r.jsx(r.Fragment,{children:r.jsxs("ul",{className:c.flex({display:"flex",justify:"space-between",align:"center",w:"100%",h:"130px",borderRadius:"56px"}),style:{backgroundColor:e},children:[r.jsx("li",{children:r.jsxs("ul",{className:c.flex({display:"flex",justify:"space-around",ml:"20px"}),children:[r.jsx("li",{className:n.css({w:"70%"}),children:r.jsx("img",{src:(()=>{switch(l){case 1:return"/first_place.png";case 2:return"/second_place.png";case 3:return"/third_place.png";default:return"";}})(),alt:"",className:n.css({w:"80%"})})}),r.jsx("li",{className:c.flex({display:"flex",align:"center"}),children:r.jsx("span",{className:n.css({fontSize:"2rem"}),children:a})})]})}),r.jsx("li",{className:c.flex({w:"30%",display:"flex",justify:"space-between"}),children:r.jsxs("ul",{className:c.flex({display:"flex",justify:"space-around",align:"center"}),children:[r.jsx("li",{children:r.jsx("span",{className:n.css({fontSize:"2rem"}),children:i})}),r.jsx("li",{className:n.css({w:"40%",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(2)"}}),children:r.jsx("img",{src:t,alt:""})})]})})]})});};},"90522126":function r(r,t,e,n){r._m(t),r.o(t,"createCss",()=>j),r.o(t,"createMergeCss",()=>w),r.o(t,"getPatternStyles",()=>E),r.o(t,"hypenateProperty",()=>O),r.o(t,"patternFns",()=>_),r.o(t,"withoutSpace",()=>h);var a=e("83a00617"),i=e("493f9ad4"),o=e("a7897337");function s(r){return"object"==typeof r&&null!=r&&!Array.isArray(r);}e("684bc8ff"),e("2d08c2e5"),e("850e6c49"),e("92de075b"),e("bbcbf397"),e("db138b4d"),e("a3876e70"),e("df42fcb9"),e("c550eeaa"),e("d7f03125"),e("7bccf4aa"),e("6ae72255"),e("acb3f153"),e("ccd1424d"),e("fcf99f62"),e("0a4ca501"),e("8a02f26b"),e("e57b3270"),e("2554870f"),e("c98af605");var c=r=>"object"==typeof r&&null!==r;function f(r){return Object.fromEntries(Object.entries(null!=r?r:{}).filter(r=>{var t=i._(r,2);return void 0!==(t[0],t[1]);}));}var l=r=>"base"===r;function u(r){return String.fromCharCode(r+(r>25?39:97));}function v(r){return function(r){var t,e="";for(t=Math.abs(r);t>52;t=t/52|0)e=u(t%52)+e;return u(t%52)+e;}(function(r,t){for(var e=t.length;e;)r=33*r^t.charCodeAt(--e);return r;}(5381,r)>>>0);}var y=/\s*!(important)?/i;function h(r){return"string"==typeof r?r.replaceAll(" ","_"):r;}var d=r=>{var t=new Map;return function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=JSON.stringify(n);if(t.has(i))return t.get(i);var o=r(...n);return t.set(i,o),o;};},p=r=>null!=r;function g(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.stop,a=e.getKey;return function r(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c(e)){var s={},f=!0,l=!1,u=void 0;try{for(var v,y=Object.entries(e)[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var h,d=i._(v.value,2),g=d[0],b=d[1],m=null!==(h=null==a?void 0:a(g,b))&&void 0!==h?h:g,A=[...o,m];if(null==n?void 0:n(e,A))return t(e,o);var j=r(b,A);p(j)&&(s[m]=j);}}catch(r){l=!0,u=r;}finally{try{f||null==y.return||y.return();}finally{if(l)throw u;}}return s;}return t(e,o);}(r);}function b(r,t){var e=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t.utility,a=t.conditions,i=n.hasShorthand,o=n.resolveShorthand;return g(r,r=>{var t;return Array.isArray(r)?(t=a.breakpoints.keys,r.reduce((r,e,n)=>{var a=t[n];return null!=e&&(r[a]=e),r;},{})):r;},{stop:r=>Array.isArray(r),getKey:e?r=>i?o(r):r:void 0});}var m={shift:r=>r,finalize:r=>r,breakpoints:{keys:[]}},A=r=>"string"==typeof r?r.replaceAll(/[\n\s]+/g," "):r;function j(r){var t=r.utility,e=r.hash,n=r.conditions,i=void 0===n?m:n,s=r=>[t.prefix,r].filter(Boolean).join("-"),c=(r,n)=>{var a;if(e){var o=[...i.finalize(r),n];a=s(t.toHash(o,v));}else a=[...i.finalize(r),s(n)].join(":");return a;};return d(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.base,s=b(Object.assign(a._(e,["base"]),n),r),f=new Set;return g(s,(r,e)=>{if(null!=r){var n,a="string"==typeof r&&y.test(r),s=o._(i.shift(e)),u=s[0],v=c(s.slice(1).slice().filter(r=>!l(r)),t.transform(u,"string"==typeof(n=A(r))?n.replace(y,"").trim():n).className);a&&(v="".concat(v,"!")),f.add(v);}}),Array.from(f).join(" ");});}function w(r){function t(t){var e=function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return t.flat().filter(r=>s(r)&&Object.keys(f(r)).length>0);}(...t);return 1===e.length?e:e.map(t=>b(t,r));}return{mergeCss:d(function(){for(var r=arguments.length,e=Array(r),n=0;n<r;n++)e[n]=arguments[n];return function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((t,e)=>(e&&Object.keys(e).forEach(n=>{var a=t[n],i=e[n];s(a)&&s(i)?t[n]=r(a,i):t[n]=i;}),t),{});}(...t(e));}),assignCss:function(){for(var r=arguments.length,e=Array(r),n=0;n<r;n++)e[n]=arguments[n];return Object.assign({},...t(e));}};}var C=/([A-Z])/g,x=/^ms-/,O=d(r=>r.startsWith("--")?r:r.replace(C,"-$1").replace(x,"-ms-").toLowerCase()),S=new RegExp("^(".concat("min|max|clamp|calc",")\\(.*\\)")),k="(?:".concat("cm,mm,Q,in,pc,pt,px,em,ex,ch,rem,lh,rlh,vw,vh,vmin,vmax,vb,vi,svw,svh,lvw,lvh,dvw,dvh,cqw,cqh,cqi,cqb,cqmin,cqmax,%".split(",").join("|"),")"),q=new RegExp("^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?".concat(k,"$")),_={map:function(r,t){return Array.isArray(r)?r.map(r=>t(r)):s(r)?g(r,r=>t(r)):t(r);},isCssFunction:r=>"string"==typeof r&&S.test(r),isCssVar:r=>"string"==typeof r&&/^var\(--.+\)$/.test(r),isCssUnit:r=>"string"==typeof r&&q.test(r)},E=(r,t)=>(null==r?void 0:r.defaultValues)?Object.assign({},"function"==typeof r.defaultValues?r.defaultValues(t):r.defaultValues,f(t)):t;},"913c70d7":function e(e,n,t,l){e._m(n);var r=t("41124836"),o=t("43197d33"),i=t("19774022");n.default=e=>{var n=e.visible,t=e.count;return r.jsx(r.Fragment,{children:r.jsx(o.ConfigProvider,{theme:{components:{Modal:{contentBg:"transparent",boxShadow:"none"}}},children:r.jsx(o.Modal,{open:n,footer:null,closable:!1,title:null,children:r.jsx("div",{className:i.css({display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",fontSize:"15rem",color:"transparent",WebkitTextStroke:"0.7rem white",fontFamily:"Oswald"}),children:t>0?t:""})})})});};},"9894bc2d":function e(e,s,t,r){e._m(s);var a=t("41124836"),i=t("19774022");s.default=e=>{var s=e.title,t=e.isMobile,r=e.children;return a.jsxs("div",{className:i.css({position:"relative",mt:"1rem",h:"fit-content",w:"100%"}),children:[a.jsx("div",{className:i.css({position:"absolute",top:"0",left:"0",h:"100%",w:"100%",zIndex:"-1"}),children:a.jsx("div",{className:i.css({position:"absolute",top:"0",left:"0",pt:"1rem",h:"100%",w:"100%",bg:"var(--light)",backgroundImage:'url("https://www.transparenttextures.com/patterns/45-degree-fabric-light.png")',border:"3px solid #2d2d2d",borderRadius:"20px"})})}),a.jsxs("div",{className:i.css({mt:"2rem"}),children:[a.jsx("h3",{className:i.css({position:"absolute",top:"0",left:"0",right:"0",transform:"translateY(-50%)",display:"flex",justifyContent:"center",alignItems:"center"}),children:a.jsx("span",{className:i.css({fontSize:t?"1.2rem":"2rem",w:"fit-content",bg:"var(--light)",backgroundImage:'url("https://www.transparenttextures.com/patterns/45-degree-fabric-light.png")',p:"0 1.5rem"}),children:s})}),a.jsx("div",{className:i.css({p:"1.2rem"}),children:r})]})]});};},"a0182127":function f(f,b,c,d){f._m(b),c("684bc8ff"),c("2d08c2e5"),c("d7f03125"),c("90522126"),c("b4fb2e4b");},"af20d690":function e(e,t,u,a){e._m(t);var f=u("493f9ad4"),r=u("a0fc9dfd");t.default=e=>{var t=r.useCallback(e=>{c(e),d(!0);},[]),u=f._(r.useState(0),2),a=u[0],c=u[1],s=f._(r.useState(!1),2),n=s[0],d=s[1];return r.useEffect(()=>{if(!n||a<=0){0===a&&n&&d(!1);return;}var e=setTimeout(()=>{c(e=>e-1);},1e3);return()=>clearTimeout(e);},[a,n]),r.useEffect(()=>{n&&0===a&&(d(!1),e());},[a,n,e]),{count:a,isCounting:n,startCountdown:t};};},"b4fb2e4b":function c(c,e,f,a){c._m(e),f("c550eeaa"),f("2d08c2e5"),f("a3876e70"),f("684bc8ff"),f("d7f03125"),f("90522126"),f("6d142275");},"daf4d053":function e(e,r,s,a){e._m(r),e.o(r,"Rooms",()=>b);var o=s("493f9ad4");s("2d08c2e5"),s("a3876e70"),s("b25dd2f8");var n=s("41124836"),t=s("a0fc9dfd"),i=e.i(s("ffbd9dd4")),l=s("a873dcba"),c=s("19774022"),d=s("42bda066"),f=s("95106b84"),m=e.i(s("2cc41426")),x=s("dbb535e9"),u=e.i(s("20eef726")),p=e.i(s("9894bc2d")),h=s("d3610244");function b(){var r=f.useParams().roomId,s=o._(t.useState([]),2),a=s[0],b=s[1],v=window.location.origin,y=o._(t.useState("".concat(v,"/PicoloR-frontend-farm/controller/join?roomID=").concat(r)),1)[0];t.useEffect(()=>{(async()=>{var e=await h.supabase.from("room_members").select("user_id").eq("room_id",r),s=e.data,a=e.error;if(a)console.error(a);else if(s){var o=s.map(e=>e.user_id),n=await h.supabase.from("users").select("name").in("id",o),t=n.data,i=n.error;i?console.error(i):t&&b(t.map(e=>e.name));}})();},[r]),t.useEffect(()=>{var e=h.supabase.channel("table_member_db_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"room_members"},async e=>{if("INSERT"===e.eventType){var s,a;if(console.log(e),console.log(null===(s=e.new)||void 0===s?void 0:s.room_id),(null===(a=e.new)||void 0===a?void 0:a.room_id)===Number(r)){var o=await h.supabase.from("users").select("name").eq("id",e.new.user_id).single(),n=o.data,t=o.error;t?console.error(t):n&&b(e=>[...e,n.name]);}}}).subscribe();return()=>{e.unsubscribe();};},[]);var j=async()=>{if(a.length<2){alert("2人以上でゲームを開始してください");return;}try{var e=await fetch("https://picolor-backend-python.onrender.com/host/theme_color?roomID=".concat(r),{method:"GET"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));window.location.href="/PicoloR-frontend-farm/room/".concat(r,"/hostUser");}catch(e){console.error("Fetch error:",e);}};return n.jsxs(n.Fragment,{children:[n.jsx(e.f(i),{mode:l.HeaderMode.GREEN}),n.jsxs("div",{className:c.css({mt:"90px"}),children:[n.jsx("h1",{className:d.flex({display:"flex",justify:"center",fontSize:"2.5rem",fontFamily:"M PLUS 1p",color:"#4A4747"}),children:"スマホでQRを読み取って参加しよう！"}),n.jsxs("div",{className:d.flex({display:"flex",w:"100%",justify:"center",mt:"25px"}),children:[n.jsx("div",{className:d.flex({display:"flex",justify:"center",align:"center",mt:"20px",w:"40%",h:"100%"}),children:n.jsx(e.f(u),{url:y})}),n.jsx("div",{className:d.flex({width:"40%"}),children:n.jsxs(e.f(p),{title:"参加者一覧",children:[n.jsxs("div",{className:d.flex({display:"flex",justify:"center",fontSize:"3rem"}),children:[a.length,"人"]}),n.jsx("ul",{className:d.flex({p:"5px 20px",display:"flex",flexWrap:"wrap",listStyle:"none"}),children:a.map(e=>n.jsx("li",{className:c.css({display:"inline",p:"5px 20px",fontSize:"1rem"}),children:e},e))})]})})]}),n.jsx("div",{className:d.flex({display:"flex",justify:"center",m:"0 auto",mt:"20px",w:"480px",h:"83px"}),children:n.jsx(e.f(m),{type:x.ButtonMode.GREEN,text:"GAME START",onClick:j})})]})]});}},"e0cff433":function e(e,s,a,r){e._m(s),e.o(s,"ControllerPlaying",()=>_);var o=a("15edfc35"),n=a("94a74ea6"),t=a("493f9ad4");a("81b47ea5"),a("ec86718a"),a("2d08c2e5"),a("a3876e70"),a("b25dd2f8");var l=a("41124836"),c=a("19774022"),i=e.i(a("ffbd9dd4")),d=a("a873dcba"),f=a("de705a76"),m=a("a0fc9dfd"),u=e.i(a("5303d056")),x=e.i(a("f0ca30b9")),p=e.i(a("d532e91a")),h=a("d3610244"),v=e.i(a("2971a921")),N=e.i(a("c9d7d9fb"));function _(){var s=t._(m.useState(f.CONTROLLER_PLAYING_MODE.WAITING),2),a=s[0],r=s[1],_=t._(m.useState(null),2),w=_[0],b=_[1],I=t._(m.useState(!0),2),E=I[0],j=I[1],y=t._(m.useState(null),2),g=y[0],L=y[1],O=t._(m.useState(null),2),R=O[0],D=O[1],G=new URL(window.location.href),A=G.searchParams.get("roomID"),T=Number(A),C=G.searchParams.get("userID");async function P(){var e=await h.supabase.from("posts").select("\n        room_colors(color),\n        rank,\n        image\n      ").eq("room_id",A).eq("user_id",C).single(),s=e.data,a=e.error;return a?(console.error(a),!1):s?void b({colorCode:s.room_colors.color,rank:s.rank,imagePath:"data:image/jpeg;base64,".concat(s.image)}):(console.error("data is null"),!1);}async function k(){var e=await h.supabase.from("posts").select("color_id, user_id").eq("room_id",T),s=e.data,a=e.error;return a?(console.error("error",a),null):s?(C&&s.some(e=>"".concat(e.user_id)===C)&&await P(),s):(console.error("data is null"),null);}async function M(){var e=await fetch("https://picolor-backend-go.onrender.com/controller/colors?roomID=".concat(A),{method:"GET"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));var s=(await e.json()).themeColors,a=await k();a&&L([...s.map(e=>{var s=a.some(s=>s.color_id===e.ColorId);return n._(o._({},e),{isPosted:s});})]);}return(m.useEffect(()=>{var e=h.supabase.channel("table_rooms_db_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"rooms"},async e=>{if(console.log(e),"UPDATE"===e.eventType){var s;if((null===(s=e.new)||void 0===s?void 0:s.id)===T){var o,n,t=null===(o=e.new)||void 0===o?void 0:o.is_start,l=null===(n=e.new)||void 0===n?void 0:n.is_finish;switch(!0){case null!==w:break;case l:r(f.CONTROLLER_PLAYING_MODE.FINISHED),await k();break;case t:a===f.CONTROLLER_PLAYING_MODE.WAITING&&await M(),r(f.CONTROLLER_PLAYING_MODE.PLAYING);break;default:r(f.CONTROLLER_PLAYING_MODE.WAITING);}}}}).subscribe(),s=h.supabase.channel("table_posts_db_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async e=>{if(console.log("payload",e),"INSERT"===e.eventType){var s;(null===(s=e.new)||void 0===s?void 0:s.room_id)===T&&await M();}}).subscribe();return()=>{e.unsubscribe(),s.unsubscribe();};},[]),m.useEffect(()=>{var e=async()=>{var e=await h.supabase.from("rooms").select("is_start, is_finish").eq("id",T),s=e.data,a=e.error;if(a){console.error("error",a);return;}if(!s){console.error("data is null");return;}var o=s[0].is_start,n=s[0].is_finish;switch(!0){case n:r(f.CONTROLLER_PLAYING_MODE.FINISHED),await k();break;case o:await M(),r(f.CONTROLLER_PLAYING_MODE.PLAYING);break;default:r(f.CONTROLLER_PLAYING_MODE.WAITING);}},s=async()=>{var e=await h.supabase.from("users").select("name").eq("id",C).single(),s=e.data,a=e.error;if(a){console.error("error",a);return;}if(!s){console.error("data is null");return;}D(s.name);};(async()=>{await e(),await s(),j(!1);})();},[]),A)?C?E?l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GREEN}),l.jsx(e.f(v),{})]}):a===f.CONTROLLER_PLAYING_MODE.WAITING?l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GREEN}),l.jsx(e.f(u),{}),l.jsx(e.f(p),{userName:R||"unknown controller"})]}):w?l.jsxs("main",{style:{background:w.colorCode},className:c.css({h:"100dvh",w:"100dvw",p:"10px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",overflow:"hidden"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GRAY}),l.jsx(e.f(N),{post:w}),l.jsx(e.f(p),{userName:R||"unknown controller"})]}):a===f.CONTROLLER_PLAYING_MODE.FINISHED?l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GRAY}),l.jsx("p",{className:c.css({fontSize:"4rem",fontWeight:"bold",color:"var(--dark)",WebkitTextStroke:"1px var(--secondary)"}),children:"LOSE"}),l.jsx(e.f(p),{userName:R||"unknown controller"})]}):g&&0!==g.length?l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",overflow:"hidden"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GRAY}),l.jsx(e.f(x),{themeColors:g}),l.jsx(e.f(p),{userName:R||"unknown controller"})]}):l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GREEN}),l.jsxs("p",{className:c.css({fontSize:"1.2rem",fontWeight:"bold",color:"red",textAlign:"center"}),children:["テーマカラーが取得できませんでした。",l.jsx("br",{}),"もう一度接続してください。"]})]}):l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GREEN}),l.jsxs("p",{className:c.css({fontSize:"1.2rem",fontWeight:"bold",color:"red",textAlign:"center"}),children:["userID が存在しません。",l.jsx("br",{}),"正しい画面に接続してください。"]})]}):l.jsxs("main",{className:c.css({h:"100dvh",w:"100dvw",p:"10px 30px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}),children:[l.jsx(e.f(i),{mode:d.HeaderMode.GREEN}),l.jsxs("p",{className:c.css({fontSize:"1.2rem",fontWeight:"bold",color:"red",textAlign:"center"}),children:["roomID が存在しません。",l.jsx("br",{}),"正しい画面に接続してください。"]})]});}},"ea0b0704":function s(s,e,a,r){s._m(e);var t=a("41124836"),l=a("19774022");e.default=s=>{var e=s.id,a=s.text,r=s.iconPath,n=s.isMobile,c=s.alt;return t.jsxs("li",{className:l.css({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:n?"0":"10px"}),children:[t.jsx("img",{id:e,src:r,alt:c,className:l.css({h:n?"100px":"160px",transition:"transform 0.2s","&:hover":{transform:"scale(1.2)"}})}),t.jsx("label",{htmlFor:e,className:l.css({fontSize:n?"1rem":"1.2rem",color:"var(--secondary)"}),children:a})]});};},"ec590ab6":function n(n,c,f,i){n._m(c),f("90522126");},"eee422e1":function e(e,s,n,a){e._m(s),e.o(s,"Test",()=>c);var r=n("493f9ad4");n("81b47ea5"),n("ec86718a"),n("2d08c2e5"),n("a3876e70");var i=n("41124836"),o=n("a0fc9dfd"),t=n("d3610244");function c(){var e=Number(new URL(window.location.href).searchParams.get("roomId")),s=r._(o.useState(!1),2),n=s[0],a=s[1],c=r._(o.useState(!1),2),d=c[0],l=c[1];return o.useEffect(()=>{var s=t.supabase.channel("table_rooms_db_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"rooms"},async s=>{if(console.log(s),"UPDATE"===s.eventType){var n,r,i;(null===(n=s.new)||void 0===n?void 0:n.id)===e&&(a(null===(r=s.new)||void 0===r?void 0:r.is_start),l(null===(i=s.new)||void 0===i?void 0:i.is_finish));}}).subscribe();return()=>{s.unsubscribe();};},[]),i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"test"}),i.jsxs("div",{children:[n?"ゲームが開始されました":"ゲームはまだ開始されていません",i.jsx("br",{}),d?"ゲームが終了しました":"ゲームはまだ終了していません"]})]});}},"f0ca30b9":function e(e,t,a,o){e._m(t);var n=a("493f9ad4");a("81b47ea5"),a("ec86718a"),a("2d08c2e5"),a("a3876e70"),a("b25dd2f8"),a("e57b3270"),a("850e6c49");var r=a("41124836"),s=a("43197d33"),l=a("19774022"),i=a("a0fc9dfd"),c=e.i(a("f9dad3aa")),d=a("6ea95e45");t.default=function(t){var a=t.themeColors,o=n._(i.useState(!1),2),u=o[0],m=o[1],h=n._(i.useState(null),2),f=h[0],p=h[1],g=n._(i.useState(null),2),v=g[0],b=g[1],x=n._(i.useState(null),2),w=x[0],y=x[1],C=n._(i.useState(null),2),j=C[0],I=C[1],N=n._(s.message.useMessage(),2),_=N[0],k=N[1],D=new URL(window.location.href),P=Number(D.searchParams.get("roomID")),R=Number(D.searchParams.get("userID")),S=(e,t,a,o)=>new Promise((n,r)=>{var s=new FileReader;s.readAsDataURL(e),s.onload=e=>{var s,l=new Image;l.src=null===(s=e.target)||void 0===s?void 0:s.result,l.onload=()=>{var e=document.createElement("canvas"),s=e.getContext("2d");if(!s){r(Error("Canvas is not supported"));return;}var i=l.width,c=l.height;if(i>t||c>a){var d=Math.min(t/i,a/c);i=Math.round(i*d),c=Math.round(c*d);}e.width=i,e.height=c,s.drawImage(l,0,0,i,c),n(e.toDataURL("image/jpeg",o));};},s.onerror=r;}),E=async e=>{var t,a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(!f){_.error("色の選択に失敗しました");return;}y(a),b(URL.createObjectURL(a)),m(!0),console.log("file",a);var o=(await S(a,800,800,.7)).split(",")[1];fetch("https://picolor-backend-python.onrender.com/controller/image",{method:"POST",body:JSON.stringify({roomID:P,userID:R,colorID:f.ColorId,image:o})}).then(async e=>{if(m(!1),!e.ok){_.error(e.statusText),b(null),y(null),I(null);return;}var t=await e.json();if(console.log(t),void 0===t.is_success){_.error("is_success is undefined"),b(null),y(null),I(null);return;}if(t.is_success){I({colorCode:f.ColorCode,rank:t.rank,imagePath:v||""}),_.success("色の判定が完了しました！");return;}b(null),y(null),I(null),_.error(t.error);}).catch(e=>{m(!1),_.error(e),b(null),y(null),I(null);});}};return i.useEffect(()=>{null!==f&&document.createElement("canvas").getContext("2d")&&new Image().src;},[v]),r.jsxs(s.Form,{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[k,r.jsx(s.Form.Item,{name:"image",valuePropName:"pic",children:r.jsx("input",{type:"file",accept:"image/*",id:"file-input",capture:"environment",style:{display:"none"},onChange:E})}),null===w||null===v?r.jsx("div",{className:l.css({w:"full",h:"full",p:"6rem 10px 5rem 10px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",gap:"20px"}),children:a.map(t=>r.jsx(e.f(c),{color:t,onClick:()=>p(t)},t.ColorId))}):r.jsxs("div",{className:l.css({position:"relative",display:"inline-block",w:"fit-content",h:"fit-content",overflow:u?"hidden":"visible"}),children:[r.jsx("img",{className:l.css({h:"60dvh",opacity:u?"0.5":"1",display:"block"}),src:v,alt:"入力画像"}),r.jsx("div",{style:{background:"linear-gradient(to bottom, transparent 45%, ".concat(f?f.ColorCode:"white"," 50%, transparent 55%)")},className:l.css({position:"absolute",bottom:"0",left:"0",right:"0",h:"100%",w:"100%",animation:"radar-scan 2s linear infinite",opacity:u?"1":"0"})}),r.jsxs("div",{className:l.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}),children:[r.jsx("img",{src:j?d.CROWN_IMAGE_PATH[j.rank-1]:"",alt:"",className:l.css({w:"20dvh",h:"15dvh",position:"absolute",transform:"rotate(40deg)",float:"right",top:"-15%",right:"-15%",zIndex:1,transition:"opacity 1s",opacity:j?1:0})}),r.jsx("div",{style:{backgroundColor:j?j.colorCode:"white"},className:l.css({position:"absolute",left:"0",right:"0",top:j?"0%":"100%",bottom:"0",transition:"top 1s",zIndex:-2})})]})]})]});};},"f510c216":function e(e,_,o,r){e._m(_),e.o(_,"isCondition",()=>a),e.o(_,"finalizeConditions",()=>d),e.o(_,"sortConditions",()=>c),o("7bccf4aa"),o("2d08c2e5"),o("a3876e70"),o("e57b3270"),o("850e6c49"),o("92de075b"),o("bbcbf397"),o("ac0fc1d5");var l=o("90522126"),t=new Set("_hover,_focus,_focusWithin,_focusVisible,_disabled,_active,_visited,_target,_readOnly,_readWrite,_empty,_checked,_enabled,_expanded,_highlighted,_complete,_incomplete,_dragging,_before,_after,_firstLetter,_firstLine,_marker,_selection,_file,_backdrop,_first,_last,_only,_even,_odd,_firstOfType,_lastOfType,_onlyOfType,_peerFocus,_peerHover,_peerActive,_peerFocusWithin,_peerFocusVisible,_peerDisabled,_peerChecked,_peerInvalid,_peerExpanded,_peerPlaceholderShown,_groupFocus,_groupHover,_groupActive,_groupFocusWithin,_groupFocusVisible,_groupDisabled,_groupChecked,_groupExpanded,_groupInvalid,_indeterminate,_required,_valid,_invalid,_autofill,_inRange,_outOfRange,_placeholder,_placeholderShown,_pressed,_selected,_grabbed,_underValue,_overValue,_atValue,_default,_optional,_open,_closed,_fullscreen,_loading,_hidden,_current,_currentPage,_currentStep,_today,_unavailable,_rangeStart,_rangeEnd,_now,_topmost,_motionReduce,_motionSafe,_print,_landscape,_portrait,_dark,_light,_osDark,_osLight,_highContrast,_lessContrast,_moreContrast,_ltr,_rtl,_scrollbar,_scrollbarThumb,_scrollbarTrack,_horizontal,_vertical,_icon,_starting,sm,smOnly,smDown,md,mdOnly,mdDown,lg,lgOnly,lgDown,xl,xlOnly,xlDown,2xl,2xlOnly,2xlDown,smToMd,smToLg,smToXl,smTo2xl,mdToLg,mdToXl,mdTo2xl,lgToXl,lgTo2xl,xlTo2xl,@/xs,@/sm,@/md,@/lg,@/xl,@/2xl,@/3xl,@/4xl,@/5xl,@/6xl,@/7xl,@/8xl,base".split(",")),n=/^@|&|&$/;function a(e){return t.has(e)||n.test(e);}var i=/^_/,s=/&|@/;function d(e){return e.map(e=>t.has(e)?e.replace(i,""):s.test(e)?"[".concat(l.withoutSpace(e.trim()),"]"):e);}function c(e){return e.sort((e,_)=>{var o=a(e),r=a(_);return o&&!r?1:!o&&r?-1:0;});}},"f63218e0":function n(n,c,f,i){n._m(c),f("90522126");},"f9dad3aa":function s(s,e,o,a){s._m(e);var i=o("41124836"),t=o("19774022");e.default=s=>{var e=s.color,o=s.onClick;return console.log(e.ColorCode),i.jsx("label",{htmlFor:e.isPosted?void 0:"file-input",style:{backgroundColor:e.ColorCode},className:t.css({w:"150px",h:"150px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",opacity:e.isPosted?.5:1,filter:e.isPosted?"saturate(0.5)":"saturate(1)",boxShadow:"0 8px 8px rgba(0,0,0,0.25)",transition:"all 0.3s"}),onClick:e.isPosted?void 0:o,"aria-disabled":e.isPosted,children:i.jsx("img",{className:t.css({w:"60%",h:"60%"}),src:e.isPosted?"/verified.svg":"camera.svg",alt:"カメラ"})});};},"ffbd9dd4":function n(n,e,a,o){n._m(e);var r=a("41124836"),l=a("a873dcba");e.default=n=>{var e=n.mode;if(e===l.HeaderMode.NONE)return null;var a=e===l.HeaderMode.GREEN?"green":"gray";return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:"\n        @import url('https://fonts.googleapis.com/css2?family=Londrina+Solid&display=swap');\n\n        .header {\n          font-size: 4rem;\n          padding: 0 1rem;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          display: flex;\n          font-family: 'Londrina Solid', sans-serif;\n        }\n\n        /* 後ろ側の黒文字 */\n        .header .black-text {\n          color: black;\n        }\n\n        /* 前景の緑文字（上にずらして重ねる） */\n        .header .colored-text {\n          position: absolute;\n          top: -4px;\n          left: 12px;\n          text-shadow: \n            -2px -2px 0 #2E2E2E, \n             2px -2px 0 #2E2E2E, \n            -2px  2px 0 #2E2E2E, \n             2px  2px 0 #2E2E2E;\n        }\n\n        /* 緑パターン */\n        .header.green .colored-text {\n          color: #0AC74F;\n        }\n\n        /* グレーパターン */\n        .header.gray .colored-text {\n          color: gray;\n        }\n      "}),r.jsxs("h1",{className:"header ".concat(a),children:[r.jsx("span",{className:"black-text",children:"PiColoR"}),r.jsx("span",{className:"colored-text",children:"PiColoR"})]})]});};},});
//# sourceMappingURL=index_d49c.c82ef4d0.js.map